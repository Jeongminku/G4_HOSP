<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<head>
	<meta charset="UTF-8" />
	<title>순양병원</title>

<!-- THYMELEAF JS  -->
	<script th:inline="javascript">
    
	$(document).ready(function(){
    	var errorMessage = [[${errorMessage}]];
    	if(errorMessage != null){
        	alert(errorMessage);
    	}

	});
    
	function readURL(input) {
 		var id = $(input).attr('id');
	    var reader = new FileReader();
	    reader.onload = function(e) {
	      document.getElementById('preview'+id).src = e.target.result;
	    };
	    reader.readAsDataURL(input.files[0]);
    }
    
	</script>

<!-- THYMELEAF CSS -->
	<style th:inline="text">
		.wrap {
			margin: 0 auto;
		}

		.headwrap{
			margin: 0 auto;
		}
		.viewhead{
			text-align: center;
			border-bottom: 3px solid black;
			height: 10%;
		}

		.viewlinebox {
			border: 1px solid black;
			text-align: center;
		}

		.linemenu{
			height: 50px;
			text-align: center;
			display: table;
			margin-top: 10px;
		}
		.tablemenu{
			border: 1px solid
		}
		.detailbody {
			border: none;
		}

		.inputarea{
			height: 100%;
			width: 70%;
		}

		.detail{
			width : 100%;
			height: 150px;
		}

		.cont_img{
			width: 15%;
		}

		.but{
			height: 30px;
			width: 80px;
			background: #226597;
			color: white;	
		}
		.inspace{
			padding: 5px;
			margin: 1px;
		}

		.table{
			margin-top: 10px;
		}

	</style>
</head>
<body>
	<section layout:fragment="content">
		<div class="wrap">
			<div class="cont">
				<div class="row head" style="margin: 0 auto; margin-bottom: 150px">
					<div class="col-md-10 headwrap">
						<div class="col-md-12 viewhead">
							<h1 style="color: #226597; font-weight: bold;">진료 내역 수정</h1>
						</div>
						<form th:action="'/archive/update/'+${archive.id}" method="post" enctype="multipart/form-data" th:object="${archiveFormDto}">		
							<input type="hidden" th:value="${archiveFormDto.id}" th:field = "*{id}">					
							<div class="col-md-12 viewhead"></div>
							<div class="col-md-12 viewlineboxup"></div>
							<div class="col-md-12 viewlinebox"></div>
							<div class="col-md-12 tablemenu">
								<table class="table table-bordered">
									<tbody>
										<tr>
											<th scope="row">진료내역번호</th>
											<td> [[${archive.id}]] </td>
											<th scope="row">진료일</th>
											<td> [[${archive.ArchiveCreatedtime}]] </td>
										</tr>
										<tr>
											<th scope="row">환자명</th>
											<td><input type="text" readonly="readonly" th:value="${patient.name}" class="form-control inputarea"></td>
											<th scope="row">나이</th>
											<td><input type="text" readonly="readonly" th:value="${age}+세" class="form-control inputarea"></td>
										</tr>								
										<tr>
											<th scope="row">질병병</th>
											<td><input type="text" th:field="*{disease}" class="form-control inputarea"></td>
											<th scope="row">담당의</th>
											<td><input type="text" name ="doctorname" th:value="${archiveFormDto.doctorname}" readonly="readonly" class="form-control inputarea"></td>
										</tr>
										<tr class="detailhead">
											<td colspan="4">
												<div class="inspace" >세부 진료 사항</div>
												<p> <textarea class="detail" th:field = "*{detail}" placeholder="작성예시"></textarea> </p>
												<img th:id = "preview1" th:name = "1" class="cont_img" onclick="change(this)">									
												<img th:id = "preview2" th:name = "2" class="cont_img" onclick="change(this)">									
												<img th:id = "preview3" th:name = "3" class="cont_img" onclick="change(this)">									
												<img th:id = "preview4" th:name = "4" class="cont_img" onclick="change(this)">									
											</td>	
										</tr>
										<tr>
											<td colspan="4">
												<p class="inspace">사진첨부</p> 
												<input type="file" class="form-control" th:id="1" onchange="readURL(this)" name="PostImgFile" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
												<input type="file" class="form-control" th:id="2" onchange="readURL(this)" name="PostImgFile" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
												<input type="file" class="form-control" th:id="3" onchange="readURL(this)" name="PostImgFile" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
												<input type="file" class="form-control" th:id="4" onchange="readURL(this)" name="PostImgFile" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
											</td>
										</tr>
									</tbody>
								</table>
								<div class="col-md-12 linemenu">
									<button class="btn btn-primary" type="submit"> 수정 완료 </button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</section>
</body>
</html>
