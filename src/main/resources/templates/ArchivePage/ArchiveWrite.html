<!DOCTYPE html>

<!-- layout이 적용되어있는 페이지 폼 입니다. 
		따로 적용할 거 없이 "content 영역에 각 페이지 별 내용 기입하시면 됩니다."-->

<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<head>
<meta charset="UTF-8" />
<title>진료 내역 작성페이지입니다.</title>

<!-- THYMELEAF JS  -->
<th:block layout:fragment="script">
	<script th:inline="javascript">
    
	$(document).ready(function(){
    	var errorMessage = [[${errorMessage}]];
    	if(errorMessage != null){
        	alert(errorMessage);
    	}

	});
    
	function readURL(input) {
 		var id = $(input).attr('id');
	    var reader = new FileReader();
	    reader.onload = function(e) {
	      document.getElementById('preview'+id).src = e.target.result;
	    };
	    reader.readAsDataURL(input.files[0]);
    }
    
	</script>
</th:block>

<!-- THYMELEAF CSS -->
<th:block layout:fragment="css">
	<style>
section {
	background-color: #eeeeee;
}

.wrap {
	margin: 0 auto;
}

.headwrap{
	margin: 0 auto;
}
.viewhead{
	text-align: center;
	border-bottom: 3px solid black;
	height: 10%;
}

.viewlinebox {
	border: 1px solid black;
	text-align: center;
}

.linemenu{
	height: 50px;
	text-align: center;
	display: table;
	margin-top: 10px;
}
.tablemenu{
	border: 1px solid;
	background-color: white;
	padding: 15px;
}
.detailbody {
	border: none;
}

.inputarea{
	height: 100%;
	width: 70%;
}

.detail{
	width : 100%;
	height: 150px;
}

.cont_img{
	width: 15%;
}

.but{
	height: 30px;
	width: 80px;
	background: #205B8A;
	color: white;
}

.inspace{
	padding: 5px;
	margin: 1px;
}

.imgspace{
	margin-top: 10px;
}

</style>
</th:block>
</head>
<body>
	<div layout:fragment="content">
	<section>
	
		<div class="wrap">
			<div class="cont">
				<div class="row head" style="margin: 0 auto; margin-bottom: 150px">
					<div class="col-md-10 headwrap">

					<div class="col-md-12 viewhead">
						<h1 style="color: #205B8A; font-weight: bold;">진료 내역 작성</h1>
					</div>
					
					<form th:action="'/archive/write/'+${patient.id}" method="post" enctype="multipart/form-data" th:object="${archiveFormDto}">	
					<input type="hidden" th:value="${archiveFormDto.doctorname}">	
					<div class="col-md-12 viewlineboxup"></div>
					<div class="col-md-12 viewlinebox">
					</div>

					<div class="col-md-12 tablemenu">
						<table class="table table-bordered">
							<tbody>
								<tr>
									<th scope="row">환자명</th>
									<td><input type="text" readonly="readonly" th:value="${patient.name}" class="form-control inputarea"></td>
									<th scope="row">나이</th>
									<td><input type="text" readonly="readonly" th:value="${age}+세" class="form-control inputarea"></td>
								</tr>
								<tr>
									<th scope="row">질병명</th>
											<td><select class="form-select" aria-label="Default select example" th:field = "*{disease}" style="width: 70%">
												<option th:each ="dis : ${DL}" th:value="${dis.diseaseName}"> [[${dis.diseaseName}]] </option>
											</select>
											</td>
									<th scope="row">담당의</th>
									<td><input type="text" name ="doctorname" th:value="${doctor.name}" readonly="readonly" class="form-control inputarea"></td>
								</tr>
								<tr class="detailhead">
									<td colspan="4">
										<div class="inspace" >세부 진료 사항</div>
										<p> <textarea class="detail" th:field = "*{detail}" placeholder="내용을 작성해주세요">  </textarea> </p>
										<div class="imgspace">
											<img th:id = "preview1" th:name = "1" class="cont_img" onclick="change(this)">									
											<img th:id = "preview2" th:name = "2" class="cont_img" onclick="change(this)">									
											<img th:id = "preview3" th:name = "3" class="cont_img" onclick="change(this)">									
											<img th:id = "preview4" th:name = "4" class="cont_img" onclick="change(this)">																			
										</div>
									</td>	
								</tr>
								<tr>
									<td colspan="4">
									<p class="inspace">사진첨부</p> 
											<input type="file" class="form-control" th:id="1" onchange="readURL(this)" name="PostImgFile" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
											<input type="file" class="form-control" th:id="2" onchange="readURL(this)" name="PostImgFile" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
											<input type="file" class="form-control" th:id="3" onchange="readURL(this)" name="PostImgFile" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
											<input type="file" class="form-control" th:id="4" onchange="readURL(this)" name="PostImgFile" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
									</td>
								</tr>
							</tbody>
						</table>
					<div class="col-md-12 linemenu">
						<button class="btn btn-primary" type="submit" > 작성 완료 </button>
					</div>
					</div>
					</form>
					</div>
				</div>
			</div>
		</div>
	</section>
	</div>

</body>
</html>
