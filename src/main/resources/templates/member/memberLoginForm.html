<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layouts/layout}"
>
	<head>
		<meta charset="UTF-8" />
		<title> 순양병원 </title> 
		<script type="text/javascript" th:src="@{/js/cookie.js}"></script>
		<!-- THYMELEAF JS  -->
		<th:block>
			<script th:inline="javascript">
			//쿠키를 이용한 아이디 기억
			$(document).ready(function() {
				var userInputId = getCookie("userInputId");
				var setCookieYN = getCookie("setCookieYN");

				if (setCookieYN == 'Y') {
					$("#id_save").prop("checked", true);
					$("#loginid").val(userInputId);
				} else {
					$("#id_save").prop("checked", false);
				}

				//로그인 버튼 클릭
				$('#loginbtn').click(function() {
					if ($("#id_save").is(":checked")) {
						var userInputId = $("#loginid").val();
						setCookie("userInputId", userInputId, 30);
						setCookie("setCookieYN", "Y", 30);
					} else {
						deleteCookie("userInputId");
						deleteCookie("setCookieYN");
					}
				});
			});
	
				
			</script>
		</th:block>
	</head>
	<body>
		<section layout:fragment="content" class="d-flex align-items-center justify-content-center max-w-50">
			<form class="row g-3 d-flex flex-column align-items-end w-100" action="/members/login" method="post">
				<div>
					<label class="h4" th:for="loginid">아이디</label> 
					<input type="text" name="loginid" id="loginid" class="form-control">
				</div>
				<div>
					<label class="h4" th:for="password">비밀번호</label> 
					<input type="password" name="password" id="password" class="form-control">
				</div>
				<div>
					<!-- 로그인 오류시 에러메시지 출력하기 !  -->
					<p th:if="${loginErrorMsg}" class="error" th:text="${loginErrorMsg}"></p> 
					<label><input class="me-2" type="checkbox" name="id_save" id="id_save" />아이디 기억</label>
				</div>
				<div class="Find text-end">
					<p class="mb-2"> 아이디가 기억나지 않으신가요? <a th:href="'/members/FindId'" class="c-alert-color">아이디 찾기</a></p>
					<p> 비밀번호가 기억나지 않으신가요? <a th:href="'/members/FindPwd'" class="c-alert-color">비밀번호 찾기</a></p>
				</div>
				<div class="w-100 d-flex">
					<button type="submit" class="btn btn-primary mb-3 me-2 w-50" id="loginbtn" onclick="location.href='/'">로그인</button>
					<button type="button" class="btn btn-primary mb-3 w-50" onclick="location.href='/members/new'">회원가입</button>
				</div>
				<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
			</form>
		</section>
	</body>
</html>