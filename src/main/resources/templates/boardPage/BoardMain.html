<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
      
<head>
<meta charset="UTF-8">
<title>순양병원</title>
<link rel="stylesheet" href="../../css/BoardMain.css">
	<style th:inline="text">
	
	
	</style>	
		<script th:inline="javascript">
			  
		  
			$(document).ready(
					function(){
		  const width = window.innerWidth;
						if(width < 1076){
							$(".title").css("width" , "200px").css("overflow" , "hidden").css("text-overflow", "ellipsis")
						}
						
					}
					
			)	
		
		window.onresize = function() {		
			  const width = window.innerWidth;
			  console.log(width)
			  //'input=[name=title]'.eq('0')
	
				if(width < 1076) {
					$(".title").css("width" , "200px").css("overflow" , "hidden").css("text-overflow", "ellipsis")
				}
				if(width > 1076){
					$(".title").css("width" , "").css("overflow" , "").css("text-overflow", "")
				}
					
				
			}
  
			  
	</script>	
</head>
<body>
	<section layout:fragment="content">

	<h3>고객 게시판</h3><br><hr><br>

					<div class="job-box">
						<div class="job-box-filter">
							<div class="row">
								<div class="col-md-6 col-sm-6">
				
								</div>
								<div class="col-md-6 col-sm-6">
												<div class="filter-search-box text-right">
										
										<form class="d-flex" role="search" th:action="@{/board/main}" method="get">
											<input name="searchQuery" class="form-control me-2" type="search" placeholder="검색어 입력" aria-label="Search">
											<button class="btn btn-outline-success" type="submit" style="width: 100px;">검색</button>
										</form>
										
									</div>
								</div>
							</div>
						</div>
						<div class="inbox-message">
							<ul th:each="list , i : ${lists.getContent()}">							
								</li>
								<li>
								<a href="#">
										<div class="message-avatar">
											<img
												th:src="${list.member.imgUrl}"
												th:alt="${list.member.imgOri}">
										</div>
										<div class="message-body" >
											<div class="message-body-heading">
										
												<h5 class="title" th:if= "${list.boardSecret.name() == 'False'}"
												 th:href="'/board/' +${list.id}"><a style="color:#0D6EFD" th:href="'/board/' +${list.id}">
													[[${list.title}]]</a>
												</h5>
												
												<h5 class="title" th:unless= "${list.boardSecret.name() == 'False'}"
												 th:href="'/board/' +${list.id}">
												
												 <a th:if = "${list.member.loginid != #authentication.name} and ${#authorization.expression('hasAnyRole(''ROLE_CLIENT'',''ROLE_ANONYMOUS'')') ?  true: false}" style="color:#0D6EFD" th:href="'/board/' +${list.id}">비밀글입니다.</a>
												 
												
												 <a  th:unless="${list.member.loginid != #authentication.name} and ${#authorization.expression('hasAnyRole(''ROLE_CLIENT'',''ROLE_ANONYMOUS'')') ?  true: false}" style="color:#0D6EFD" th:href="'/board/' +${list.id}">[[${list.title}]]</a>
												 
												</h5>
												

												<span th:text="작성일_ + ${#temporals.format(list.regTime, 'yyyy-MM-dd HH:mm:ss')}"></span>
											</div>
											<p class="p-content"></p><br>
											<p>글번호 : [[${list.id}]] &nbsp; 작성자 : [[${list.member.loginid}]] &nbsp; 조회수 : [[${list.view}]] &nbsp; 댓글 : [[${list.replyCount}]]</p>
										</div>
								</a>
								</li>

							</ul>
						</div>
					</div>
		<button style="float: right;" class="btn btn-primary" onClick="location.href='/board/write'" sec:authorize="isAuthenticated()">글쓰기</button>
					<nav
	th:with="start=${(lists.number/maxPage)*maxPage + 1}
	,end=(${(lists.totalPages == 0) ? 1 : (start + (maxPage - 1) < lists.totalPages ? start + (maxPage - 1) : lists.totalPages)})"
	aria-label="Page navigation example">
	<ul class="pagination d-flex justify-content-center">
		<li class="page-item" th:classappend="${lists.first}?'disabled'">
			<a th:href="@{'/board/main' + '?searchQuery=' + ${boardSerchDto.searchQuery} + '&page=' + ${lists.number-1}}" class="page-link">
				<span>이전</span>
			</a>
		</li>
		<li class="page-item"
			th:each="page: ${#numbers.sequence(start, end)}"
			th:classappend="${lists.number eq page-1}?'active':''">
			<a class="page-link" th:inline="text"
			th:href="@{'/board/main' +'?searchQuery=' + ${boardSerchDto.searchQuery} + '&page=' + ${page-1}}">[[${page}]]</a>
		</li>
		<li class="page-item" th:classappend="${lists.last}?'disabled'">
			<a class="page-link"
			th:href="@{'/board/main' +'?searchQuery=' + ${boardSerchDto.searchQuery} + '&page=' + ${lists.number+1}}">다음</a>
		</li>
	</ul>

</nav>
	
	
	</section>
</body>
</html>