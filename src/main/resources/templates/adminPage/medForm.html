<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/adminLayout}">
<head>
<meta charset="UTF-8">
<title>순양병원</title>
<script th:inline="javascript">
	   
$(document).ready(
		function() {
			var error = [[${errorMessage}]]
			
			if(error != null) {
				alert(error)
			}
		}
	)

	
</script>
</head>
<body>
	<section layout:fragment="content">
	[[${medFormDto == null}]]
	[[${medFormDto != null}]]
	
<div th:if="${#strings.isEmpty(medFormDto.medName)}">

		<h2 class="h3 b-line mb-4">새 진료과 개설</h2>
		<form class="px-5 d-flex flex-column align-items-end" action="/admin/med" method="post" enctype="multipart/form-data" th:object="${medFormDto}">
			<div class="input-group mb-3">
				<span class="input-group-text" id="inputGroup-sizing-default">개설할 진료과 명 입력</span>
				<input type="text" th:field="*{medName}"  name="medName" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
			</div>
			<div class="w-100 mb-2">
				<label class="h5" for="floatingTextarea2">진료과 설명</label>
				<textarea class="form-control" th:field="*{medInfo}" placeholder="간단한 진료과 소개글을 적어주세요" id="floatingTextarea2" style="height: 100px"></textarea>
			</div>
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
			<button type="submit" class="btn btn-primary">진료과 등록하기</button>
		</form>	

		<h2 class="h3 b-line m-0">등록된 진료과 목록</h2>
		<table class="table">
			<thead class="table-header">
				<tr>
					<th scope="col">진료과</th>
					<th scope="col">진료과설명</th>
					<th scope="col"></th>
					<th scope="col"></th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="meds : ${meds}">
				
					<td style="color:blue"><span class="medName">[[${meds.medName}]]</span></td>
					<td><span class="medInfo">[[${meds.medInfo}]]</span></td>
					<td><a th:href="'/admin/delmed/' + ${meds.medId}">삭제</a></td>
					<td><a th:href="'/admin/editmed/' + ${meds.medId}">수정</a></td>
				</tr>
			</tbody>
		</table>

</div>

<div th:unless="${#strings.isEmpty(medFormDto.medName)}">

		<h2 class="h3 b-line mb-4">진료과 수정</h2>
		<form class="px-5 d-flex flex-column align-items-end" action="/admin/editmed" method="post" enctype="multipart/form-data" th:object="${medFormDto}">
			<div class="input-group mb-3">
				<input type="hidden" th:value = ${medFormDto.medId} th:field="*{medId}">
				<span class="input-group-text" id="inputGroup-sizing-default">개설할 진료과 명 입력</span>
				<input type="text" th:field="*{medName}"  name="medName" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
			</div>
			<div class="w-100 mb-2">
				<label class="h5" for="floatingTextarea2">진료과 설명</label>
				<textarea class="form-control" th:field="*{medInfo}" placeholder="간단한 진료과 소개글을 적어주세요" id="floatingTextarea2" style="height: 100px"></textarea>
			</div>
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
			<button type="submit" class="btn btn-primary">진료과 수정하기</button>
		</form>	
		
		

</div>
	



	</section>
</body>
</html>