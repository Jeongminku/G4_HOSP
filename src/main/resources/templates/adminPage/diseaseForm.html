<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/adminLayout}">
<head>
<meta charset="UTF-8">
<title>순양병원</title>
<script th:inline="javascript">
	   
$(document).ready(
		function() {
			var error = [[${errorMessage}]]
			
			if(error != null) {
				alert(error)
			}
		}
	)

	
</script>
</head>
<body>
	<section layout:fragment="content">

		<h2 class="h3 b-line mb-4">관리 병명 추가하기</h2>
		<form class="d-flex flex-column align-items-end px-5" action="/admin/disease" method="post" enctype="multipart/form-data" th:object="${diseaseFormDto}">
			<!-- 진료과에서 생성한 항목들 들어가기 -->
			<div class="d-flex align-items-end justify-content-between w-100 mb-2">
				<div class="d-flex flex-column w-25">
					<label for="assignedMed" class="h5">관리과 선택</label>
					<select th:field="*{med}" id="assignedMed" class="form-select" aria-label="Default select example">
						<option th:each="meds : ${meds}" th:value="${meds.medId}"> [[${meds.medName}]]  </span>
					</select>
				</div>
				<div class="input-group ms-2">
					<span class="input-group-text" id="inputGroup-sizing-default">병명</span>
					<input type="text" th:field="*{diseaseName}"  name="diseaseName" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
					<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
				</div>
			</div>
			<button type="submit" class="btn btn-primary">등록하기</button>
		</form>	
		
		<h2 class="h3 b-line m-0">진료과 별 담당 병 목록</h2>
		<table class="table">
			<thead class="table-header">
				<tr>
					<th scope="col">진료과</th>
					<th scope="col">해당 진료과 등록 병명</th>
					<th scope="col"></th>
				</tr>

				</thead>
				<tbody>
			
				<tr th:each="diseases : ${diseases}">
					<td style="color:blue"><span class="medName">[[${diseases.med.medName}]]</span></td>
					<td><span class="medInfo">[[${diseases.diseaseName}]]</span></td>
					<td><a th:href="'/admin/deldisease/' + ${diseases.diseaseId}">삭제</a></td>
				</tr>
				</tbody>
			</table>
		</div>

	</section>
</body>
</html>